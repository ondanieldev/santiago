{"ast":null,"code":"var _jsxFileName = \"/home/ondaniel/santiago/sisgie-frontend/src/pages/GenerateDocumentsByContract/index.tsx\";\nimport React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Form } from '@unform/web';\nimport { toast } from 'react-toastify';\nimport { Container, Main, DocumentGroup } from './styles';\nimport Loading from '../../components/Loading';\nimport Header from '../../components/Header';\nimport Aside from '../../components/Aside';\nimport Title from '../../components/Title';\nimport Button from '../../components/Button';\nimport Document from '../../components/Document';\nimport api from '../../services/api';\n\nconst GenerateDocumentsByContract = () => {\n  const {\n    contract_id\n  } = useParams();\n  const formRef = useRef(null);\n  const [contract, setContract] = useState({});\n  const [loadingPage, setLoadingPage] = useState(false);\n  const [loadingSubmit, setLoadingSubmit] = useState(false);\n  const handleGenerateDocuments = useCallback(async () => {\n    try {\n      setLoadingSubmit(true);\n      const response = await api.post(`/contracts/${contract_id}/documents`);\n      const contractWithDocuments = response.data;\n      setContract(contractWithDocuments);\n    } catch (err) {\n      if (err.response) {\n        toast.error(`Erro ao gerar documentos: ${err.response.data.message}`);\n      } else {\n        toast.error('Erro interno do servidor! Por favor, tente novamente mais tarde.');\n      }\n    } finally {\n      setLoadingSubmit(false);\n    }\n  }, [contract_id]);\n  useEffect(() => {\n    setLoadingPage(true);\n    api.get(`contracts/${contract_id}`).then(response => setContract(response.data)).catch(() => {\n      toast.error('Erro ao carragar contrato! Por favor, tente novamente mais tarde.');\n    }).finally(() => {\n      setLoadingPage(false);\n    });\n  }, [contract_id]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    show: loadingPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Aside, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Main, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    title: \"Gerar documentos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DocumentGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, contract.contract_document && /*#__PURE__*/React.createElement(Document, {\n    link: contract.contract_document,\n    name: \"Contrato\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }), contract.checklist_document && /*#__PURE__*/React.createElement(Document, {\n    link: contract.checklist_document,\n    name: \"Checklist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }), contract.enrollment_form_document && /*#__PURE__*/React.createElement(Document, {\n    link: contract.enrollment_form_document,\n    name: \"Ficha de matr\\xEDcula\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form, {\n    ref: formRef,\n    onSubmit: () => handleGenerateDocuments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    loading: loadingSubmit,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, \"Gerar novos documentos\"))));\n};\n\nexport default GenerateDocumentsByContract;","map":{"version":3,"sources":["/home/ondaniel/santiago/sisgie-frontend/src/pages/GenerateDocumentsByContract/index.tsx"],"names":["React","useEffect","useState","useCallback","useRef","useParams","Form","toast","Container","Main","DocumentGroup","Loading","Header","Aside","Title","Button","Document","api","GenerateDocumentsByContract","contract_id","formRef","contract","setContract","loadingPage","setLoadingPage","loadingSubmit","setLoadingSubmit","handleGenerateDocuments","response","post","contractWithDocuments","data","err","error","message","get","then","catch","finally","contract_document","checklist_document","enrollment_form_document"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Form } from '@unform/web';\nimport { FormHandles } from '@unform/core';\nimport { toast } from 'react-toastify';\n\nimport { FiAperture } from 'react-icons/fi';\nimport { Container, Main, DocumentGroup } from './styles';\nimport Loading from '../../components/Loading';\nimport Header from '../../components/Header';\nimport Aside from '../../components/Aside';\nimport Title from '../../components/Title';\nimport Button from '../../components/Button';\nimport Document from '../../components/Document';\nimport api from '../../services/api';\nimport IContract from '../../entities/IContract';\n\ninterface IParams {\n  contract_id: string;\n}\n\nconst GenerateDocumentsByContract: React.FC = () => {\n  const { contract_id } = useParams<IParams>();\n\n  const formRef = useRef<FormHandles>(null);\n\n  const [contract, setContract] = useState({} as IContract);\n  const [loadingPage, setLoadingPage] = useState(false);\n  const [loadingSubmit, setLoadingSubmit] = useState(false);\n\n  const handleGenerateDocuments = useCallback(async () => {\n    try {\n      setLoadingSubmit(true);\n\n      const response = await api.post<IContract>(\n        `/contracts/${contract_id}/documents`,\n      );\n\n      const contractWithDocuments = response.data;\n\n      setContract(contractWithDocuments);\n    } catch (err) {\n      if (err.response) {\n        toast.error(`Erro ao gerar documentos: ${err.response.data.message}`);\n      } else {\n        toast.error(\n          'Erro interno do servidor! Por favor, tente novamente mais tarde.',\n        );\n      }\n    } finally {\n      setLoadingSubmit(false);\n    }\n  }, [contract_id]);\n\n  useEffect(() => {\n    setLoadingPage(true);\n    api\n      .get(`contracts/${contract_id}`)\n      .then(response => setContract(response.data))\n      .catch(() => {\n        toast.error(\n          'Erro ao carragar contrato! Por favor, tente novamente mais tarde.',\n        );\n      })\n      .finally(() => {\n        setLoadingPage(false);\n      });\n  }, [contract_id]);\n\n  return (\n    <Container>\n      <Loading show={loadingPage} />\n\n      <Header />\n\n      <Aside />\n\n      <Main>\n        <Title title=\"Gerar documentos\" />\n\n        <DocumentGroup>\n          {contract.contract_document && (\n            <Document link={contract.contract_document} name=\"Contrato\" />\n          )}\n\n          {contract.checklist_document && (\n            <Document link={contract.checklist_document} name=\"Checklist\" />\n          )}\n\n          {contract.enrollment_form_document && (\n            <Document\n              link={contract.enrollment_form_document}\n              name=\"Ficha de matrícula\"\n            />\n          )}\n        </DocumentGroup>\n\n        <Form ref={formRef} onSubmit={() => handleGenerateDocuments}>\n          <Button loading={loadingSubmit} type=\"submit\">\n            Gerar novos documentos\n          </Button>\n        </Form>\n      </Main>\n    </Container>\n  );\n};\n\nexport default GenerateDocumentsByContract;\n"]},"metadata":{},"sourceType":"module"}