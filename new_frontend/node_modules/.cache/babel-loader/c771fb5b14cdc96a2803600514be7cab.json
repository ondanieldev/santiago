{"ast":null,"code":"import _slicedToArray from\"/home/ondaniel/santiago/sisgie/new_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/home/ondaniel/santiago/sisgie/new_frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useEffect,useRef,useState}from'react';import{useField}from'@unform/core';import{FiAlertCircle}from'react-icons/fi';import{Container,Error}from'./styles';var Select=function Select(_ref){var name=_ref.name,Icon=_ref.icon,optionsArray=_ref.optionsArray,rest=_objectWithoutProperties(_ref,[\"name\",\"icon\",\"optionsArray\"]);var selectRef=useRef(null);var _useField=useField(name),fieldName=_useField.fieldName,error=_useField.error,registerField=_useField.registerField,defaultValue=_useField.defaultValue;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),selectedOption=_useState2[0],setSelectedOption=_useState2[1];useEffect(function(){setSelectedOption(defaultValue);},[defaultValue]);useEffect(function(){registerField({name:fieldName,ref:selectRef.current,path:'value',setValue:function setValue(_,value){setSelectedOption(value);}});},[fieldName,selectRef,registerField]);return/*#__PURE__*/React.createElement(Container,{isErrored:!!error},Icon&&/*#__PURE__*/React.createElement(Icon,{size:20}),/*#__PURE__*/React.createElement(\"select\",Object.assign({defaultValue:selectedOption,name:name,ref:selectRef},rest),optionsArray.map(function(option){return/*#__PURE__*/React.createElement(\"option\",{selected:selectedOption===option.value,key:option.value,value:option.value},option.label);})),error&&/*#__PURE__*/React.createElement(Error,{title:error},/*#__PURE__*/React.createElement(FiAlertCircle,{color:\"#f44336\",size:20})));};export default Select;","map":{"version":3,"sources":["/home/ondaniel/santiago/sisgie/new_frontend/src/components/SelectInput/index.tsx"],"names":["React","useEffect","useRef","useState","useField","FiAlertCircle","Container","Error","Select","name","Icon","icon","optionsArray","rest","selectRef","fieldName","error","registerField","defaultValue","selectedOption","setSelectedOption","ref","current","path","setValue","_","value","map","option","label"],"mappings":"gRAAA,MAAOA,CAAAA,KAAP,EAEEC,SAFF,CAGEC,MAHF,CAIEC,QAJF,KAKO,OALP,CAOA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,aAAT,KAA8B,gBAA9B,CAEA,OAASC,SAAT,CAAoBC,KAApB,KAAiC,UAAjC,CAaA,GAAMC,CAAAA,MAA6B,CAAG,QAAhCA,CAAAA,MAAgC,MAKhC,IAJJC,CAAAA,IAII,MAJJA,IAII,CAHEC,IAGF,MAHJC,IAGI,CAFJC,YAEI,MAFJA,YAEI,CADDC,IACC,+DACJ,GAAMC,CAAAA,SAAS,CAAGZ,MAAM,CAAoB,IAApB,CAAxB,CADI,cAEsDE,QAAQ,CAACK,IAAD,CAF9D,CAEIM,SAFJ,WAEIA,SAFJ,CAEeC,KAFf,WAEeA,KAFf,CAEsBC,aAFtB,WAEsBA,aAFtB,CAEqCC,YAFrC,WAEqCA,YAFrC,eAGwCf,QAAQ,CAAS,EAAT,CAHhD,wCAGGgB,cAHH,eAGmBC,iBAHnB,eAKJnB,SAAS,CAAC,UAAM,CACdmB,iBAAiB,CAACF,YAAD,CAAjB,CACD,CAFQ,CAEN,CAACA,YAAD,CAFM,CAAT,CAIAjB,SAAS,CAAC,UAAM,CACdgB,aAAa,CAAC,CACZR,IAAI,CAAEM,SADM,CAEZM,GAAG,CAAEP,SAAS,CAACQ,OAFH,CAGZC,IAAI,CAAE,OAHM,CAIZC,QAJY,mBAIHC,CAJG,CAImBC,KAJnB,CAIkC,CAC5CN,iBAAiB,CAACM,KAAD,CAAjB,CACD,CANW,CAAD,CAAb,CAQD,CATQ,CASN,CAACX,SAAD,CAAYD,SAAZ,CAAuBG,aAAvB,CATM,CAAT,CAWA,mBACE,oBAAC,SAAD,EAAW,SAAS,CAAE,CAAC,CAACD,KAAxB,EACGN,IAAI,eAAI,oBAAC,IAAD,EAAM,IAAI,CAAE,EAAZ,EADX,cAEE,4CACE,YAAY,CAAES,cADhB,CAEE,IAAI,CAAEV,IAFR,CAGE,GAAG,CAAEK,SAHP,EAIMD,IAJN,EAMGD,YAAY,CAACe,GAAb,CAAiB,SAAAC,MAAM,qBACtB,8BACE,QAAQ,CAAET,cAAc,GAAKS,MAAM,CAACF,KADtC,CAEE,GAAG,CAAEE,MAAM,CAACF,KAFd,CAGE,KAAK,CAAEE,MAAM,CAACF,KAHhB,EAKGE,MAAM,CAACC,KALV,CADsB,EAAvB,CANH,CAFF,CAkBGb,KAAK,eACJ,oBAAC,KAAD,EAAO,KAAK,CAAEA,KAAd,eACE,oBAAC,aAAD,EAAe,KAAK,CAAC,SAArB,CAA+B,IAAI,CAAE,EAArC,EADF,CAnBJ,CADF,CA0BD,CAnDD,CAqDA,cAAeR,CAAAA,MAAf","sourcesContent":["import React, {\n  SelectHTMLAttributes,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { IconBaseProps } from 'react-icons';\nimport { useField } from '@unform/core';\nimport { FiAlertCircle } from 'react-icons/fi';\n\nimport { Container, Error } from './styles';\n\ninterface IOption {\n  value: string | undefined;\n  label: string;\n}\n\ninterface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\n  name: string;\n  icon?: React.ComponentType<IconBaseProps>;\n  optionsArray: IOption[];\n}\n\nconst Select: React.FC<SelectProps> = ({\n  name,\n  icon: Icon,\n  optionsArray,\n  ...rest\n}) => {\n  const selectRef = useRef<HTMLSelectElement>(null);\n  const { fieldName, error, registerField, defaultValue } = useField(name);\n  const [selectedOption, setSelectedOption] = useState<string>('');\n\n  useEffect(() => {\n    setSelectedOption(defaultValue);\n  }, [defaultValue]);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: selectRef.current,\n      path: 'value',\n      setValue(_: HTMLSelectElement, value: string) {\n        setSelectedOption(value);\n      },\n    });\n  }, [fieldName, selectRef, registerField]);\n\n  return (\n    <Container isErrored={!!error}>\n      {Icon && <Icon size={20} />}\n      <select\n        defaultValue={selectedOption}\n        name={name}\n        ref={selectRef}\n        {...rest}\n      >\n        {optionsArray.map(option => (\n          <option\n            selected={selectedOption === option.value}\n            key={option.value}\n            value={option.value}\n          >\n            {option.label}\n          </option>\n        ))}\n      </select>\n      {error && (\n        <Error title={error}>\n          <FiAlertCircle color=\"#f44336\" size={20} />\n        </Error>\n      )}\n    </Container>\n  );\n};\n\nexport default Select;\n"]},"metadata":{},"sourceType":"module"}