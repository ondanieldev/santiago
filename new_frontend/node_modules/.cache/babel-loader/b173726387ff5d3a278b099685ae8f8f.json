{"ast":null,"code":"import _slicedToArray from\"/home/ondaniel/santiago/sisgie/new_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useHistory}from'react-router-dom';import{Container,AnimatedContainer,Mask}from'./styles';import{useAuth}from'../../hooks/auth';import{useAside}from'../../hooks/aside';var Aside=function Aside(){var _useAuth=useAuth(),user=_useAuth.user,signOut=_useAuth.signOut;var _useAside=useAside(),show=_useAside.show,toggle=_useAside.toggle;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),links=_useState2[0],setLinks=_useState2[1];useEffect(function(){if(show&&window.innerWidth<=900){toggle();}},[history]);// eslint-disable-line\nuseEffect(function(){var allLinks=[{path:'/dashboard',label:'Dashboard'},{path:'/new-enrollment',label:'Nova matrícula',permiss:['create_new_enrollments_permiss']},{path:'/validate-enrollments/grades',label:'Validar matrículas',permiss:['validate_enrollments_permiss']},{path:'/create-extra-debits/grades',label:'Criar débitos adicionais',permiss:['create_extra_debits_permiss']},{path:'/pay-debits/grades',label:'Pagar débitos',permiss:['pay_debits_permiss']},{path:'/receive-payments/grades',label:'Receber pagamentos',permiss:['discharge_payments_permiss']},{path:'/extra-debits/grades',label:'Gerenciar débitos adicionais',permiss:['crud_extra_debits_permiss']},{path:'/profiles',label:'Gerenciar perfis',permiss:['crud_profiles_permiss']},{path:'/grades',label:'Gerenciar turmas',permiss:['crud_grades_permiss']},{path:'/users',label:'Gerenciar usuários',permiss:['crud_users_permiss']}];var filteredLinks=allLinks.filter(function(link){var hasPermiss=false;if(link.permiss){link.permiss.forEach(function(permiss){if(permiss&&user.profile[permiss]){hasPermiss=true;}});}else{hasPermiss=true;}return hasPermiss;});setLinks(filteredLinks);},[user]);return/*#__PURE__*/React.createElement(Container,null,show&&/*#__PURE__*/React.createElement(AnimatedContainer,null,/*#__PURE__*/React.createElement(\"ul\",null,links.map(function(link){return/*#__PURE__*/React.createElement(\"li\",{key:link.path},/*#__PURE__*/React.createElement(Link,{to:link.path},link.label));}),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:signOut},\"Logout\")))),show&&window.innerWidth<=900&&/*#__PURE__*/React.createElement(Mask,null));};export default Aside;","map":{"version":3,"sources":["/home/ondaniel/santiago/sisgie/new_frontend/src/components/Aside/index.tsx"],"names":["React","useEffect","useState","Link","useHistory","Container","AnimatedContainer","Mask","useAuth","useAside","Aside","user","signOut","show","toggle","history","links","setLinks","window","innerWidth","allLinks","path","label","permiss","filteredLinks","filter","link","hasPermiss","forEach","profile","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { Container, AnimatedContainer, Mask } from './styles';\nimport { useAuth } from '../../hooks/auth';\nimport { useAside } from '../../hooks/aside';\n\ninterface ILink {\n  path: string;\n  label: string;\n  permiss?: (\n    | 'create_new_enrollments_permiss'\n    | 'validate_enrollments_permiss'\n    | 'create_extra_debits_permiss'\n    | 'pay_debits_permiss'\n    | 'discharge_payments_permiss'\n    | 'crud_profiles_permiss'\n    | 'crud_users_permiss'\n    | 'crud_grades_permiss'\n    | 'crud_extra_debits_permiss'\n  )[];\n}\n\nconst Aside: React.FC = () => {\n  const { user, signOut } = useAuth();\n  const { show, toggle } = useAside();\n\n  const history = useHistory();\n\n  const [links, setLinks] = useState([] as ILink[]);\n\n  useEffect(() => {\n    if (show && window.innerWidth <= 900) {\n      toggle();\n    }\n  }, [history]); // eslint-disable-line\n\n  useEffect(() => {\n    const allLinks = [\n      { path: '/dashboard', label: 'Dashboard' },\n      {\n        path: '/new-enrollment',\n        label: 'Nova matrícula',\n        permiss: ['create_new_enrollments_permiss'],\n      },\n      {\n        path: '/validate-enrollments/grades',\n        label: 'Validar matrículas',\n        permiss: ['validate_enrollments_permiss'],\n      },\n      {\n        path: '/create-extra-debits/grades',\n        label: 'Criar débitos adicionais',\n        permiss: ['create_extra_debits_permiss'],\n      },\n      {\n        path: '/pay-debits/grades',\n        label: 'Pagar débitos',\n        permiss: ['pay_debits_permiss'],\n      },\n      {\n        path: '/receive-payments/grades',\n        label: 'Receber pagamentos',\n        permiss: ['discharge_payments_permiss'],\n      },\n      {\n        path: '/extra-debits/grades',\n        label: 'Gerenciar débitos adicionais',\n        permiss: ['crud_extra_debits_permiss'],\n      },\n      {\n        path: '/profiles',\n        label: 'Gerenciar perfis',\n        permiss: ['crud_profiles_permiss'],\n      },\n      {\n        path: '/grades',\n        label: 'Gerenciar turmas',\n        permiss: ['crud_grades_permiss'],\n      },\n      {\n        path: '/users',\n        label: 'Gerenciar usuários',\n        permiss: ['crud_users_permiss'],\n      },\n    ] as ILink[];\n\n    const filteredLinks = allLinks.filter(link => {\n      let hasPermiss = false;\n\n      if (link.permiss) {\n        link.permiss.forEach(permiss => {\n          if (permiss && user.profile[permiss]) {\n            hasPermiss = true;\n          }\n        });\n      } else {\n        hasPermiss = true;\n      }\n\n      return hasPermiss;\n    });\n\n    setLinks(filteredLinks);\n  }, [user]);\n\n  return (\n    <Container>\n      {show && (\n        <AnimatedContainer>\n          <ul>\n            {links.map(link => (\n              <li key={link.path}>\n                <Link to={link.path}>{link.label}</Link>\n              </li>\n            ))}\n            <li>\n              <button type=\"button\" onClick={signOut}>\n                Logout\n              </button>\n            </li>\n          </ul>\n        </AnimatedContainer>\n      )}\n      {show && window.innerWidth <= 900 && <Mask />}\n    </Container>\n  );\n};\n\nexport default Aside;\n"]},"metadata":{},"sourceType":"module"}