{"ast":null,"code":"import _slicedToArray from\"/home/ondaniel/santiago/sisgie/new_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{FiAlertCircle}from'react-icons/fi';import{useField}from'@unform/core';import{Container,RadioGroup,Error}from'./styles';var RadioInput=function RadioInput(_ref){var name=_ref.name,label=_ref.label,options=_ref.options,change=_ref.change;var inputRef=useRef(null);var _useField=useField(name),fieldName=_useField.fieldName,error=_useField.error,registerField=_useField.registerField;var _useState=useState(function(){var defaultOption=options.find(function(option){return option.default;});return defaultOption?defaultOption.value:'';}),_useState2=_slicedToArray(_useState,2),selectedValue=_useState2[0],setSelectedValue=_useState2[1];var _useState3=useState(function(){var defaultOption=options.find(function(option){return option.default;});return defaultOption?defaultOption.id:'';}),_useState4=_slicedToArray(_useState3,2),defaultValue=_useState4[0],setDefaultValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isErrored=_useState6[0],setIsErrored=_useState6[1];useEffect(function(){registerField({name:fieldName,ref:inputRef.current,path:'value',setValue:function setValue(_,value){setSelectedValue(value);setDefaultValue(value==='yes'?options[0].id:options[1].id);}});},[fieldName,inputRef,registerField,options]);useEffect(function(){setIsErrored(!!error);},[error]);return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:name,ref:inputRef,value:selectedValue}),/*#__PURE__*/React.createElement(\"span\",null,label),/*#__PURE__*/React.createElement(RadioGroup,null,options.map(function(option){return/*#__PURE__*/React.createElement(\"div\",{key:option.id},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:option.id,name:\"option-\".concat(name),value:option.value,onChange:function onChange(e){setSelectedValue(e.target.value);setDefaultValue(option.id);change&&change(e.target.value);},checked:defaultValue===option.id}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:option.id},option.label));})),isErrored&&error&&/*#__PURE__*/React.createElement(Error,{title:error},/*#__PURE__*/React.createElement(FiAlertCircle,{color:\"#f44336\",size:20})));};export default RadioInput;","map":{"version":3,"sources":["/home/ondaniel/santiago/sisgie/new_frontend/src/components/RadioInput/index.tsx"],"names":["React","useEffect","useRef","useState","FiAlertCircle","useField","Container","RadioGroup","Error","RadioInput","name","label","options","change","inputRef","fieldName","error","registerField","defaultOption","find","option","default","value","selectedValue","setSelectedValue","id","defaultValue","setDefaultValue","isErrored","setIsErrored","ref","current","path","setValue","_","map","e","target"],"mappings":"8HAAA,MAAOA,CAAAA,KAAP,EAAqCC,SAArC,CAAgDC,MAAhD,CAAwDC,QAAxD,KAAwE,OAAxE,CACA,OAASC,aAAT,KAA8B,gBAA9B,CACA,OAASC,QAAT,KAAyB,cAAzB,CAEA,OAASC,SAAT,CAAoBC,UAApB,CAAgCC,KAAhC,KAA6C,UAA7C,CAgBA,GAAMC,CAAAA,UAAgC,CAAG,QAAnCA,CAAAA,UAAmC,MAAsC,IAAnCC,CAAAA,IAAmC,MAAnCA,IAAmC,CAA7BC,KAA6B,MAA7BA,KAA6B,CAAtBC,OAAsB,MAAtBA,OAAsB,CAAbC,MAAa,MAAbA,MAAa,CAC7E,GAAMC,CAAAA,QAAQ,CAAGZ,MAAM,CAAmB,IAAnB,CAAvB,CAD6E,cAGjCG,QAAQ,CAACK,IAAD,CAHyB,CAGrEK,SAHqE,WAGrEA,SAHqE,CAG1DC,KAH0D,WAG1DA,KAH0D,CAGnDC,aAHmD,WAGnDA,aAHmD,eAKnCd,QAAQ,CAAC,UAAM,CACvD,GAAMe,CAAAA,aAAa,CAAGN,OAAO,CAACO,IAAR,CAAa,SAAAC,MAAM,QAAIA,CAAAA,MAAM,CAACC,OAAX,EAAnB,CAAtB,CACA,MAAOH,CAAAA,aAAa,CAAGA,aAAa,CAACI,KAAjB,CAAyB,EAA7C,CACD,CAHiD,CAL2B,wCAKtEC,aALsE,eAKvDC,gBALuD,8BASrCrB,QAAQ,CAAC,UAAM,CACrD,GAAMe,CAAAA,aAAa,CAAGN,OAAO,CAACO,IAAR,CAAa,SAAAC,MAAM,QAAIA,CAAAA,MAAM,CAACC,OAAX,EAAnB,CAAtB,CACA,MAAOH,CAAAA,aAAa,CAAGA,aAAa,CAACO,EAAjB,CAAsB,EAA1C,CACD,CAH+C,CAT6B,yCAStEC,YATsE,eASxDC,eATwD,8BAa3CxB,QAAQ,CAAC,KAAD,CAbmC,yCAatEyB,SAbsE,eAa3DC,YAb2D,eAe7E5B,SAAS,CAAC,UAAM,CACdgB,aAAa,CAAC,CACZP,IAAI,CAAEK,SADM,CAEZe,GAAG,CAAEhB,QAAQ,CAACiB,OAFF,CAGZC,IAAI,CAAE,OAHM,CAIZC,QAJY,mBAIHC,CAJG,CAIkBZ,KAJlB,CAIuC,CACjDE,gBAAgB,CAACF,KAAD,CAAhB,CACAK,eAAe,CAACL,KAAK,GAAK,KAAV,CAAkBV,OAAO,CAAC,CAAD,CAAP,CAAWa,EAA7B,CAAkCb,OAAO,CAAC,CAAD,CAAP,CAAWa,EAA9C,CAAf,CACD,CAPW,CAAD,CAAb,CASD,CAVQ,CAUN,CAACV,SAAD,CAAYD,QAAZ,CAAsBG,aAAtB,CAAqCL,OAArC,CAVM,CAAT,CAYAX,SAAS,CAAC,UAAM,CACd4B,YAAY,CAAC,CAAC,CAACb,KAAH,CAAZ,CACD,CAFQ,CAEN,CAACA,KAAD,CAFM,CAAT,CAIA,mBACE,oBAAC,SAAD,mBACE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAEN,IAA3B,CAAiC,GAAG,CAAEI,QAAtC,CAAgD,KAAK,CAAES,aAAvD,EADF,cAEE,gCAAOZ,KAAP,CAFF,cAGE,oBAAC,UAAD,MACGC,OAAO,CAACuB,GAAR,CAAY,SAAAf,MAAM,qBACjB,2BAAK,GAAG,CAAEA,MAAM,CAACK,EAAjB,eACE,6BACE,IAAI,CAAC,OADP,CAEE,EAAE,CAAEL,MAAM,CAACK,EAFb,CAGE,IAAI,kBAAYf,IAAZ,CAHN,CAIE,KAAK,CAAEU,MAAM,CAACE,KAJhB,CAKE,QAAQ,CAAE,kBAAAc,CAAC,CAAI,CACbZ,gBAAgB,CAACY,CAAC,CAACC,MAAF,CAASf,KAAV,CAAhB,CACAK,eAAe,CAACP,MAAM,CAACK,EAAR,CAAf,CACAZ,MAAM,EAAIA,MAAM,CAACuB,CAAC,CAACC,MAAF,CAASf,KAAV,CAAhB,CACD,CATH,CAUE,OAAO,CAAEI,YAAY,GAAKN,MAAM,CAACK,EAVnC,EADF,cAaE,6BAAO,OAAO,CAAEL,MAAM,CAACK,EAAvB,EAA4BL,MAAM,CAACT,KAAnC,CAbF,CADiB,EAAlB,CADH,CAHF,CAsBGiB,SAAS,EAAIZ,KAAb,eACC,oBAAC,KAAD,EAAO,KAAK,CAAEA,KAAd,eACE,oBAAC,aAAD,EAAe,KAAK,CAAC,SAArB,CAA+B,IAAI,CAAE,EAArC,EADF,CAvBJ,CADF,CA8BD,CA7DD,CA+DA,cAAeP,CAAAA,UAAf","sourcesContent":["import React, { InputHTMLAttributes, useEffect, useRef, useState } from 'react';\nimport { FiAlertCircle } from 'react-icons/fi';\nimport { useField } from '@unform/core';\n\nimport { Container, RadioGroup, Error } from './styles';\n\ninterface IRadioOption {\n  id: string;\n  label: string;\n  value: string;\n  default?: boolean;\n}\n\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  name: string;\n  label: string;\n  options: IRadioOption[];\n  change?(value: string): void;\n}\n\nconst RadioInput: React.FC<InputProps> = ({ name, label, options, change }) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const { fieldName, error, registerField } = useField(name);\n\n  const [selectedValue, setSelectedValue] = useState(() => {\n    const defaultOption = options.find(option => option.default);\n    return defaultOption ? defaultOption.value : '';\n  });\n  const [defaultValue, setDefaultValue] = useState(() => {\n    const defaultOption = options.find(option => option.default);\n    return defaultOption ? defaultOption.id : '';\n  });\n  const [isErrored, setIsErrored] = useState(false);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: inputRef.current,\n      path: 'value',\n      setValue(_: HTMLInputElement, value: 'yes' | 'no') {\n        setSelectedValue(value);\n        setDefaultValue(value === 'yes' ? options[0].id : options[1].id);\n      },\n    });\n  }, [fieldName, inputRef, registerField, options]);\n\n  useEffect(() => {\n    setIsErrored(!!error);\n  }, [error]);\n\n  return (\n    <Container>\n      <input type=\"hidden\" name={name} ref={inputRef} value={selectedValue} />\n      <span>{label}</span>\n      <RadioGroup>\n        {options.map(option => (\n          <div key={option.id}>\n            <input\n              type=\"radio\"\n              id={option.id}\n              name={`option-${name}`}\n              value={option.value}\n              onChange={e => {\n                setSelectedValue(e.target.value);\n                setDefaultValue(option.id);\n                change && change(e.target.value);\n              }}\n              checked={defaultValue === option.id}\n            />\n            <label htmlFor={option.id}>{option.label}</label>\n          </div>\n        ))}\n      </RadioGroup>\n      {isErrored && error && (\n        <Error title={error}>\n          <FiAlertCircle color=\"#f44336\" size={20} />\n        </Error>\n      )}\n    </Container>\n  );\n};\n\nexport default RadioInput;\n"]},"metadata":{},"sourceType":"module"}