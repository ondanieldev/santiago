{"ast":null,"code":"var _jsxFileName = \"/home/ondaniel/santiago/main/new_frontend/src/components/Enrollments/index.tsx\";\nimport React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { Form } from '@unform/web';\nimport { toast } from 'react-toastify';\nimport { Container } from './styles';\nimport Table from '../Table';\nimport Input from '../Input';\nimport Button from '../Button';\nimport Loading from '../Loading';\nimport api from '../../services/api';\n\nconst Enrollments = ({\n  apiUrl,\n  handleSelectEnrollment,\n  showSearch\n}) => {\n  const formRef = useRef(null);\n  const [enrollments, setEnrollments] = useState([]);\n  const [loadingPage, setLoadingPage] = useState(false);\n  const [loadingSearch, setLoadingSearch] = useState(false);\n  useEffect(() => {\n    setLoadingPage(true);\n    api.get(apiUrl).then(response => {\n      setEnrollments(response.data || []);\n    }).catch(() => {\n      toast.error('Erro ao buscar matrículas! Por favor, tente novamente mais tarde.');\n    }).finally(() => {\n      setLoadingPage(false);\n    });\n  }, [apiUrl]);\n  const formatStatus = useCallback(status => {\n    switch (status) {\n      case 'underAnalysis':\n        return 'Em análise';\n\n      case 'pendent':\n        return 'Pendente';\n\n      case 'accepted':\n        return 'Aceito';\n\n      case 'active':\n        return 'Ativo';\n\n      default:\n        return '-';\n    }\n  }, []);\n  const handleSubmitForm = useCallback(async ({\n    student_name\n  }) => {\n    setLoadingSearch(true);\n\n    try {\n      const response = await api.get(`/contracts/students/${student_name}`);\n      setEnrollments(response.data);\n    } catch {\n      api.get(apiUrl).then(response => {\n        setEnrollments(response.data || []);\n      });\n    } finally {\n      setLoadingSearch(false);\n    }\n  }, [apiUrl]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    show: loadingPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), showSearch && /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmitForm,\n    ref: formRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"student_name\",\n    placeholder: \"Pesquisar por nome do aluno\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    loading: loadingSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, \"Pesquisar\")), /*#__PURE__*/React.createElement(Table, {\n    isVoid: enrollments.length <= 0,\n    voidMessage: \"N\\xE3o h\\xE1 matr\\xEDculas nesta se\\xE7\\xE3o!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, \"Aluno\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, \"Turma\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, enrollments.map(enrollment => /*#__PURE__*/React.createElement(\"tr\", {\n    key: enrollment.id,\n    onClick: () => handleSelectEnrollment(enrollment.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, enrollment.id), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, formatStatus(enrollment.status)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, enrollment.student.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, enrollment.grade.name))))));\n};\n\nexport default Enrollments;","map":{"version":3,"sources":["/home/ondaniel/santiago/main/new_frontend/src/components/Enrollments/index.tsx"],"names":["React","useEffect","useState","useCallback","useRef","Form","toast","Container","Table","Input","Button","Loading","api","Enrollments","apiUrl","handleSelectEnrollment","showSearch","formRef","enrollments","setEnrollments","loadingPage","setLoadingPage","loadingSearch","setLoadingSearch","get","then","response","data","catch","error","finally","formatStatus","status","handleSubmitForm","student_name","length","map","enrollment","id","student","name","grade"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,WAArC,EAAkDC,MAAlD,QAAgE,OAAhE;AAEA,SAASC,IAAT,QAAqB,aAArB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,SAASC,SAAT,QAA0B,UAA1B;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;;AAwBA,MAAMC,WAA6B,GAAG,CAAC;AACrCC,EAAAA,MADqC;AAErCC,EAAAA,sBAFqC;AAGrCC,EAAAA;AAHqC,CAAD,KAIhC;AACJ,QAAMC,OAAO,GAAGb,MAAM,CAAc,IAAd,CAAtB;AAEA,QAAM,CAACc,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACkB,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACoB,aAAD,EAAgBC,gBAAhB,IAAoCrB,QAAQ,CAAC,KAAD,CAAlD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,cAAc,CAAC,IAAD,CAAd;AAEAT,IAAAA,GAAG,CACAY,GADH,CACOV,MADP,EAEGW,IAFH,CAEQC,QAAQ,IAAI;AAChBP,MAAAA,cAAc,CAACO,QAAQ,CAACC,IAAT,IAAiB,EAAlB,CAAd;AACD,KAJH,EAKGC,KALH,CAKS,MAAM;AACXtB,MAAAA,KAAK,CAACuB,KAAN,CACE,mEADF;AAGD,KATH,EAUGC,OAVH,CAUW,MAAM;AACbT,MAAAA,cAAc,CAAC,KAAD,CAAd;AACD,KAZH;AAaD,GAhBQ,EAgBN,CAACP,MAAD,CAhBM,CAAT;AAkBA,QAAMiB,YAAY,GAAG5B,WAAW,CAC7B6B,MAAD,IAAiE;AAC/D,YAAQA,MAAR;AACE,WAAK,eAAL;AACE,eAAO,YAAP;;AACF,WAAK,SAAL;AACE,eAAO,UAAP;;AACF,WAAK,UAAL;AACE,eAAO,QAAP;;AACF,WAAK,QAAL;AACE,eAAO,OAAP;;AACF;AACE,eAAO,GAAP;AAVJ;AAYD,GAd6B,EAe9B,EAf8B,CAAhC;AAkBA,QAAMC,gBAAgB,GAAG9B,WAAW,CAClC,OAAO;AAAE+B,IAAAA;AAAF,GAAP,KAAuC;AACrCX,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;;AAEA,QAAI;AACF,YAAMG,QAAQ,GAAG,MAAMd,GAAG,CAACY,GAAJ,CAAS,uBAAsBU,YAAa,EAA5C,CAAvB;AACAf,MAAAA,cAAc,CAACO,QAAQ,CAACC,IAAV,CAAd;AACD,KAHD,CAGE,MAAM;AACNf,MAAAA,GAAG,CAACY,GAAJ,CAAQV,MAAR,EAAgBW,IAAhB,CAAqBC,QAAQ,IAAI;AAC/BP,QAAAA,cAAc,CAACO,QAAQ,CAACC,IAAT,IAAiB,EAAlB,CAAd;AACD,OAFD;AAGD,KAPD,SAOU;AACRJ,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AACF,GAdiC,EAelC,CAACT,MAAD,CAfkC,CAApC;AAkBA,sBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEM,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGGJ,UAAU,iBACT,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEiB,gBAAhB;AAAkC,IAAA,GAAG,EAAEhB,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,cADP;AAEE,IAAA,WAAW,EAAC,6BAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAEK,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBANF,CAJJ,eAgBE,oBAAC,KAAD;AACE,IAAA,MAAM,EAAEJ,WAAW,CAACiB,MAAZ,IAAsB,CADhC;AAEE,IAAA,WAAW,EAAC,+CAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJF,CADF,CAJF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjB,WAAW,CAACkB,GAAZ,CAAgBC,UAAU,iBACzB;AACE,IAAA,GAAG,EAAEA,UAAU,CAACC,EADlB;AAEE,IAAA,OAAO,EAAE,MAAMvB,sBAAsB,CAACsB,UAAU,CAACC,EAAZ,CAFvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,UAAU,CAACC,EAAhB,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKP,YAAY,CAACM,UAAU,CAACL,MAAZ,CAAjB,CALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKK,UAAU,CAACE,OAAX,CAAmBC,IAAxB,CANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKH,UAAU,CAACI,KAAX,CAAiBD,IAAtB,CAPF,CADD,CADH,CAZF,CAhBF,CADF;AA6CD,CA9GD;;AAgHA,eAAe3B,WAAf","sourcesContent":["import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { FormHandles } from '@unform/core';\nimport { Form } from '@unform/web';\nimport { toast } from 'react-toastify';\n\nimport { Container } from './styles';\nimport Table from '../Table';\nimport Input from '../Input';\nimport Button from '../Button';\nimport Loading from '../Loading';\nimport api from '../../services/api';\n\ninterface IProps {\n  apiUrl: string;\n  handleSelectEnrollment(id: string): void;\n  showSearch?: boolean;\n}\n\ninterface IEnrollment {\n  id: string;\n  status: 'accepted' | 'active' | 'underAnalysis' | 'pendent';\n  student: {\n    name: string;\n  };\n  grade: {\n    name: string;\n    year: string;\n  };\n}\n\ninterface IFormData {\n  student_name: string;\n}\n\nconst Enrollments: React.FC<IProps> = ({\n  apiUrl,\n  handleSelectEnrollment,\n  showSearch,\n}) => {\n  const formRef = useRef<FormHandles>(null);\n\n  const [enrollments, setEnrollments] = useState([] as IEnrollment[]);\n  const [loadingPage, setLoadingPage] = useState(false);\n  const [loadingSearch, setLoadingSearch] = useState(false);\n\n  useEffect(() => {\n    setLoadingPage(true);\n\n    api\n      .get(apiUrl)\n      .then(response => {\n        setEnrollments(response.data || []);\n      })\n      .catch(() => {\n        toast.error(\n          'Erro ao buscar matrículas! Por favor, tente novamente mais tarde.',\n        );\n      })\n      .finally(() => {\n        setLoadingPage(false);\n      });\n  }, [apiUrl]);\n\n  const formatStatus = useCallback(\n    (status: 'underAnalysis' | 'pendent' | 'accepted' | 'active') => {\n      switch (status) {\n        case 'underAnalysis':\n          return 'Em análise';\n        case 'pendent':\n          return 'Pendente';\n        case 'accepted':\n          return 'Aceito';\n        case 'active':\n          return 'Ativo';\n        default:\n          return '-';\n      }\n    },\n    [],\n  );\n\n  const handleSubmitForm = useCallback(\n    async ({ student_name }: IFormData) => {\n      setLoadingSearch(true);\n\n      try {\n        const response = await api.get(`/contracts/students/${student_name}`);\n        setEnrollments(response.data);\n      } catch {\n        api.get(apiUrl).then(response => {\n          setEnrollments(response.data || []);\n        });\n      } finally {\n        setLoadingSearch(false);\n      }\n    },\n    [apiUrl],\n  );\n\n  return (\n    <Container>\n      <Loading show={loadingPage} />\n\n      {showSearch && (\n        <Form onSubmit={handleSubmitForm} ref={formRef}>\n          <Input\n            name=\"student_name\"\n            placeholder=\"Pesquisar por nome do aluno\"\n          />\n\n          <Button type=\"submit\" loading={loadingSearch}>\n            Pesquisar\n          </Button>\n        </Form>\n      )}\n\n      <Table\n        isVoid={enrollments.length <= 0}\n        voidMessage=\"Não há matrículas nesta seção!\"\n      >\n        <thead>\n          <tr>\n            <td>#</td>\n            <td>Status</td>\n            <td>Aluno</td>\n            <td>Turma</td>\n          </tr>\n        </thead>\n        <tbody>\n          {enrollments.map(enrollment => (\n            <tr\n              key={enrollment.id}\n              onClick={() => handleSelectEnrollment(enrollment.id)}\n            >\n              <td>{enrollment.id}</td>\n              <td>{formatStatus(enrollment.status)}</td>\n              <td>{enrollment.student.name}</td>\n              <td>{enrollment.grade.name}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </Container>\n  );\n};\n\nexport default Enrollments;\n"]},"metadata":{},"sourceType":"module"}