{"ast":null,"code":"var _jsxFileName = \"/home/ondaniel/santiago/main/new_frontend/src/components/Aside/index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Container, AnimatedContainer, Mask } from './styles';\nimport { useAuth } from '../../hooks/auth';\nimport { useAside } from '../../hooks/aside';\n\nconst Aside = () => {\n  const {\n    user,\n    signOut\n  } = useAuth();\n  const {\n    show,\n    toggle\n  } = useAside();\n  const history = useHistory();\n  const [links, setLinks] = useState([]);\n  useEffect(() => {\n    if (show && window.innerWidth <= 900) {\n      toggle();\n    }\n  }, [history]); // eslint-disable-line\n\n  useEffect(() => {\n    const allLinks = [{\n      path: '/dashboard',\n      label: 'Dashboard'\n    }, {\n      path: '/new-enrollment',\n      label: 'Nova matrícula',\n      permiss: ['create_new_enrollments_permiss']\n    }, {\n      path: '/validate-enrollments/grades',\n      label: 'Validar matrículas',\n      permiss: ['validate_enrollments_permiss']\n    }, {\n      path: '/create-extra-debits/grades',\n      label: 'Criar débitos adicionais',\n      permiss: ['create_extra_debits_permiss']\n    }, {\n      path: '/pay-debits/grades',\n      label: 'Pagar débitos',\n      permiss: ['pay_debits_permiss']\n    }, {\n      path: '/receive-payments/grades',\n      label: 'Receber pagamentos',\n      permiss: ['discharge_payments_permiss']\n    }, {\n      path: '/extra-debits/grades',\n      label: 'Gerenciar débitos adicionais',\n      permiss: ['crud_extra_debits_permiss']\n    }, {\n      path: '/profiles',\n      label: 'Gerenciar perfis',\n      permiss: ['crud_profiles_permiss']\n    }, {\n      path: '/grades',\n      label: 'Gerenciar turmas',\n      permiss: ['crud_grades_permiss']\n    }, {\n      path: '/users',\n      label: 'Gerenciar usuários',\n      permiss: ['crud_users_permiss']\n    }];\n    const filteredLinks = allLinks.filter(link => {\n      let hasPermiss = false;\n\n      if (link.permiss) {\n        link.permiss.forEach(permiss => {\n          if (permiss && user.profile[permiss]) {\n            hasPermiss = true;\n          }\n        });\n      }\n\n      return hasPermiss;\n    });\n    setLinks(filteredLinks);\n  }, [user]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, show && /*#__PURE__*/React.createElement(AnimatedContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, links.map(link => /*#__PURE__*/React.createElement(\"li\", {\n    key: link.path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: link.path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, link.label))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"Logout\")))), show && window.innerWidth <= 900 && /*#__PURE__*/React.createElement(Mask, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 44\n    }\n  }));\n};\n\nexport default Aside;","map":{"version":3,"sources":["/home/ondaniel/santiago/main/new_frontend/src/components/Aside/index.tsx"],"names":["React","useEffect","useState","Link","useHistory","Container","AnimatedContainer","Mask","useAuth","useAside","Aside","user","signOut","show","toggle","history","links","setLinks","window","innerWidth","allLinks","path","label","permiss","filteredLinks","filter","link","hasPermiss","forEach","profile","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { Container, AnimatedContainer, Mask } from './styles';\nimport { useAuth } from '../../hooks/auth';\nimport { useAside } from '../../hooks/aside';\n\ninterface ILink {\n  path: string;\n  label: string;\n  permiss?: (\n    | 'create_new_enrollments_permiss'\n    | 'validate_enrollments_permiss'\n    | 'create_extra_debits_permiss'\n    | 'pay_debits_permiss'\n    | 'discharge_payments_permiss'\n    | 'crud_profiles_permiss'\n    | 'crud_users_permiss'\n    | 'crud_grades_permiss'\n    | 'crud_extra_debits_permiss'\n  )[];\n}\n\nconst Aside: React.FC = () => {\n  const { user, signOut } = useAuth();\n  const { show, toggle } = useAside();\n\n  const history = useHistory();\n\n  const [links, setLinks] = useState([] as ILink[]);\n\n  useEffect(() => {\n    if (show && window.innerWidth <= 900) {\n      toggle();\n    }\n  }, [history]); // eslint-disable-line\n\n  useEffect(() => {\n    const allLinks = [\n      { path: '/dashboard', label: 'Dashboard' },\n      {\n        path: '/new-enrollment',\n        label: 'Nova matrícula',\n        permiss: ['create_new_enrollments_permiss'],\n      },\n      {\n        path: '/validate-enrollments/grades',\n        label: 'Validar matrículas',\n        permiss: ['validate_enrollments_permiss'],\n      },\n      {\n        path: '/create-extra-debits/grades',\n        label: 'Criar débitos adicionais',\n        permiss: ['create_extra_debits_permiss'],\n      },\n      {\n        path: '/pay-debits/grades',\n        label: 'Pagar débitos',\n        permiss: ['pay_debits_permiss'],\n      },\n      {\n        path: '/receive-payments/grades',\n        label: 'Receber pagamentos',\n        permiss: ['discharge_payments_permiss'],\n      },\n      {\n        path: '/extra-debits/grades',\n        label: 'Gerenciar débitos adicionais',\n        permiss: ['crud_extra_debits_permiss'],\n      },\n      {\n        path: '/profiles',\n        label: 'Gerenciar perfis',\n        permiss: ['crud_profiles_permiss'],\n      },\n      {\n        path: '/grades',\n        label: 'Gerenciar turmas',\n        permiss: ['crud_grades_permiss'],\n      },\n      {\n        path: '/users',\n        label: 'Gerenciar usuários',\n        permiss: ['crud_users_permiss'],\n      },\n    ] as ILink[];\n\n    const filteredLinks = allLinks.filter(link => {\n      let hasPermiss = false;\n\n      if (link.permiss) {\n        link.permiss.forEach(permiss => {\n          if (permiss && user.profile[permiss]) {\n            hasPermiss = true;\n          }\n        });\n      }\n\n      return hasPermiss;\n    });\n\n    setLinks(filteredLinks);\n  }, [user]);\n\n  return (\n    <Container>\n      {show && (\n        <AnimatedContainer>\n          <ul>\n            {links.map(link => (\n              <li key={link.path}>\n                <Link to={link.path}>{link.label}</Link>\n              </li>\n            ))}\n            <li>\n              <button type=\"button\" onClick={signOut}>\n                Logout\n              </button>\n            </li>\n          </ul>\n        </AnimatedContainer>\n      )}\n      {show && window.innerWidth <= 900 && <Mask />}\n    </Container>\n  );\n};\n\nexport default Aside;\n"]},"metadata":{},"sourceType":"module"}